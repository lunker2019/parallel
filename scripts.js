/* (c) Parallel Project, 2017 */

"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ready(){function a(){document.querySelector("#body").style.display="block"}function b(b){return b?void e.ref("users/"+b.uid).once("value").then(function(b){i.user=b.toJSON(),a()})["catch"](function(a){console.log(a)}):a()}var c,d=(firebase.app(),firebase.auth()),e=firebase.database();d.onAuthStateChanged(b);var f={error:null,school:null,country:"United Kingdom",birthYear:2e3,submit:function(a){a.preventDefault(),f.error=null,d.createUserWithEmailAndPassword(f.email,f.password).then(function(a){i.user={first:f.first,last:f.last,birthYear:f.birthYear,country:f.country,gender:f.gender,school:f.school},e.ref("users/"+a.uid).set(i.user)})["catch"](function(a){switch(a.code){case"auth/email-already-in-use":return f.error="There already exists an account with this email address. Please login!";case"auth/invalid-email":return f.error="The email address you provided is invalid.";case"auth/weak-password":return f.error="Please pick a longer password!";default:return f.error="Sorry, we couldn't create your account. Please try again!"}})}},g={submit:function(a){}},h={error:null,showDropdown:!1,toggleDropdown:function(){h.showDropdown=!h.showDropdown},submit:function(a){a.preventDefault(),h.error=null,d.signInWithEmailAndPassword(h.email,h.password).then(b)["catch"](function(a){switch(a.code){case"auth/invalid-email":return h.error="This email address is invalid.";case"auth/user-not-found":return h.error="There is no account with this email address.";case"auth/wrong-password":return h.error="Incorrect password!";default:return h.error="Sorry, we couldn't log you in. Please try again!"}})}},i=window.app=new Vue({el:"#body",data:(c={user:null,toggleAnswers:!1,signup:f,login:h,answers:g},_defineProperty(c,"answers",{}),_defineProperty(c,"showAnswers",!1),_defineProperty(c,"feedback",{}),_defineProperty(c,"currentChallenge",null),_defineProperty(c,"logout",function(){d.signOut().then(function(){i.user=null})}),c)})}function countdown(a){var b,c=1e3,d=60*c,e=60*d,f=24*e,g=new Date(a),h=new Date,i=g-h;if(i<0)b="any time now";else{var j=Math.floor(i/f),k=Math.floor(i%f/e),l=Math.floor(i%e/d),m=Math.floor(i%d/c),b=j+" days ";b+=k+" hrs ",b+=l+" mins ",b+=m+" secs"}return b}document.addEventListener("DOMContentLoaded",ready),Array.from(window.document.querySelectorAll(".hint")).forEach(function(a){a.addEventListener("click",function(){a.style.height=a.children[0].offsetHeight+"px"})});